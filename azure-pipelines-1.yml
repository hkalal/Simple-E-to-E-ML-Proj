trigger:
- main

pool: AzureAgentPool

stages:
- stage: 'Build'
  displayName: 'Build'
  jobs:
     - job: 
       steps:

        - task: IISWebAppManagementOnMachineGroup@0
          inputs:
            EnableIIS: false
            IISDeploymentType: 'IISWebsite'
            ActionIISWebsite: 'CreateOrUpdateWebsite'
            WebsiteName: 'My-site'
            WebsitePhysicalPath: 'C:\deployment'
            WebsitePhysicalPathAuth: 'WebsiteUserPassThrough'
            CreateOrUpdateAppPoolForWebsite: true
            ConfigureAuthenticationForWebsite: true
            DotNetVersionForWebsite: 'No Managed Code'
            PipeLineModeForWebsite: 'Classic'
            AppPoolIdentityForWebsite: 'ApplicationPoolIdentity'
            AnonymousAuthenticationForWebsite: true
            BasicAuthenticationForWebsite: true